FIND_PATH(P4_INCLUDE_DIRS NAMES P4/polynomial_solver.h PATHS ${CMAKE_CURRENT_LIST_DIR}/../include /usr/include /usr/local/include)
FIND_LIBRARY(P4_LIBRARIES NAMES lib_p4 PATHS  ${CMAKE_CURRENT_LIST_DIR}/../lib /usr/lib /usr/local/lib)
set(P4_INCLUDES ${P4_INCLUDE_DIRS})
set(P4_LIBS ${P4_LIBRARIES})

IF (P4_INCLUDE_DIRS AND P4_LIBRARIES)
 SET(P4_FOUND TRUE)
ENDIF (P4_INCLUDE_DIRS AND P4_LIBRARIES)
IF (P4_FOUND)
 IF (NOT P4_FIND_QUIETLY)
 MESSAGE(STATUS "Found P4: ${P4_LIBRARIES}")
 ENDIF (NOT P4_FIND_QUIETLY)
ELSE (P4_FOUND)
 IF (P4_FIND_REQUIRED)
 MESSAGE(FATAL_ERROR "Could not find P4 library")
 ENDIF (P4_FIND_REQUIRED)
ENDIF (P4_FOUND)